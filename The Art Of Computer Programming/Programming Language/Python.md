# Python

[TOC]

## 学习资源

* [官网](<https://www.python.org/>)
* 

## 基础知识

- 实数在python中被称为浮点数（Float），如果参与除法的两个数中有一个数为浮点数，则运算结果亦为浮点数；
- 整除：”//“,即使是浮点数，双斜线也会执行整除；

```python
如：
>>>1//2
0

或：
>>>1.0//2.0
0.0
```

- 取余：
  ![](./Pictures/Python1.png)

- 乘方：`**`

  乘方运算符比取反（一元减运算符）的优先级要高；

- 长整数：普通整数+"L"，适用于旧版python不能处理大整数；

- 模块：用import导入模块，然后按照"模块.函数”的格式使用这个模块的函数。

  ```python
  import math
  math.floor(32.9)
  #floor为取整函数，若要使输出结果为整数而不是浮点数则第二行为"int(math.floor(32.9))"。
  #(int函数/类型把参数转换成整数时会自动向下取整，所以在转换过程中，math. floor是多余的，可以直接用int(32.9))。
  ```

  或者：在确定不会导入多个同名函数（从不同模块导入）的情况下可以用：

  ```python
  from math import sqrt
  sqrt(9)
  #此格式为："from模块import函数"。
  ```

* cmath和复数：(cmath模块:即complex      math,复数)，如：

  ```python
  import cmath
  cmath.Sqrt(-1)
  #注：虚数均以j或J结尾
  ```

* 注释：井号（#），在代码输入它时，它右边的一切都会被忽略。

## 字符串

- 字符串在Python程序中最主要的用法就是表示一些文本。

- 对于输入时用的双引号和程序打印出的单引号，二者没有区别。

- 若字符串中包含单引号则应用双引号将整个字符串括起来，反之亦然。

- 转义：使用反斜线（\）对字符串中的引号进行转义：

- 字符串表示，str和repr

  - str函数：它会把值转换为合理形式的字符串，以便用户可以理解
  - repr函数：会创建一个字符串，它以合法的Python表达式的形式来表示值。

- repr(x)的功能也可以用以下实现：

  ```python
  `x`
  #（注意，`是反引号而不是单引号，esc键下方那个键）
  ```

- input和raw_input的比较

  - input会假设用户输入的是字符串，而raw_input函数会把所有输入当作原始数据（raw data），然后将其放入字符串中。

- 长字符串

  - 如果需要写一个跨越多行的字符串，则可以用三个单引号代替普通引号。（也可以用三个双引号）
  - 普通字符串也可以跨行。如果一行之中最后一个字符是反斜线，那么，换行符本身就“转义”了，也就是被忽略了。

- 原始字符串

  - 换行符：\n
  - 原始字符串以`r`开头，它不会把反斜线当作特殊字符
  - 此时仍然需要对引号进行转义，但是最后输出的字符串包含了转义所用反斜线
  - 不能在原始字符串结尾输入反斜线，即原始字符最后一个字符不能是反斜线

- Unicode字符串：Unicode字符串使用u前缀

## 使用字符串

基本字符串操作：所有标准的序列操作（索引，分片，乘法，判断成员资格，求长度，取最小值和最大值）对字符串同样适用。

* 字符串格式化：字符串格式化操作符——%，在%的左侧放置一个字符串（格式化字符串），而右侧则放置希望被格式化的值。可以使用一个值，如一个字符串或者数字，也可以使用多个值的元组或者字典。一般用元组。只有元组和字典可以格式化一个以上的值。

  ```python
  format="hello, %s.%s enough for ya?"
  values=('world','hot')
  print format%values
  #格式化字符串的%s部分称为转换说明符，他们标记了需要插入转换值的位置。s表示值会被格式化为字符 串。
  ```

* 若格式化实数（浮点数）则需要用类型字符说明转换说明符的类型，同时提供所需要的精度，且精度放在类型字符前面。如：

  ```python
  format="pi with three decimals: %.3f"
  from math import pi
  print format %pi
  ```

* 补充：转换说明符可以包括字段宽度和精度，格式为”字段宽度.精度“，这两个参数都是整数，也可以用“*”作为字段，此时数值会从元组参数中读出。
  
  * 字段宽度和精度之前还可以放置一个标志，如：0，+，-,或空格。“0”表示数字将会用0进行填充；“-”用来左对齐数值；“ ”空格表示在正数前加上空格；“+”表示无论是正数还是负数都标出符号。

### 字符串方法

* find方法可以在一个较长的字符串中查找子串。它返回子串所在位置的最左端索引。如果没有找到则返回-1。

  ```python
  'A abb ABC'.find('ABC')
  #6
  ```

* join方法是非常重要的字符串方法，用来连接序列中的元素。

  ```python
  seq=['1','2','3','4','5']
  seq='+'
  seq.join(seq)
  #'1+2+3+4+5'
  #需要被连接的序列元素都必须是字符串。
  ```

* lower方法返回字符串的小写字母版。

  ```python
  'A,B,C,D'.lower()
  #'a,b,c,d'
  ```

* replace方法返回某字符串的所有匹配项均被替换之后得到字符串。

  ```python
  'This is a test'.replace('is','eez')
  #'Theez eez a test'
  ```

* split是join的逆方法，用来将字符串分割成序列。

  ```python
  '1+2+3+4+5'.split('+')
  #'1','2','3','4','5']
  ```

* strip方法返回去除两侧（不包括内部）空格的字符串。

  ```python
  '			A,S,D			'.strip()
  ```

* translate方法可以替换字符串中的某些部分。

## 列表

* **list** 函数：根据字符串创建列表。list函数适用于所有类型的序列，而不只是字符串。

  (将一个由字符组成的列表转换为字符串："join(somelist)，somelist为需要转换的列表。)

### 基本的列表操作

* 删除元素

  ```python
  >>> names = ['A','B','C','D','E']
  >>> del names[2]
  >>> names
  ['A','B','D','E']
  ```

* 元素赋值

  ```python
  >>> x=[1,1,1]
  >>> x[1] = 2
  >>> x
  [1,2,1]
  ```

* 分片赋值

  ```python
  >>> name = list('perl')
  >>> name
  ['p','e','r','l']
  >>> name[2:] = list('ar')
  >>> name
  ['p','e','a','r']
  ```

### 列表方法：

* append 方法用于在列表末尾追加新的对象：

  ```python
  >>> lst = [1,2,3]
  >>> lst.append(4)
  >>> lst
  [1,2,3,4]
  ```

* count 方法统计某个元素在列表中出现的次数：

  ```python
  >>> ['A','B','C','A',['A','B'],['A','B']].count('A')
  2
  >>> x = ['A','B','C','A',['A','B'],['A','B']]
  >>> x.count(['A','B'])
  2
  ```

* extend 方法可以在列表的末尾一次性追加另一个序列中的多个值：

  ```python
  >>> a = [1,2,3]
  >>> b = [4,5,6]
  >>> a.extend(b)
  >>> a
  [1,2,3,4,5,6]
  ```

* index 方法用于从列表中找出某个值第一个匹配项的索引位置：

  ```python
  >>> a=[1,2,3]
  >>> a.index(2)
  1
  ```

* insert方法用于将对象插入到列表中：

  ```python
  >>> numbers.insert （ 3 ， ' four ' ）  
  [ 1 ， 2 ， 3 ， 'four' ]
  ```

* pop方法会移除列表中的一个元素（默认是最后一个），并且返回该元素的值;pop方法是唯一一个既能修改列表又返回元素值的列表方法：

  ```python
  >>> x = [1,2,3]
  >>> x.pop()
  3
  >>> x
  [1,2]
  >>> x.pop(0)
  1
  >>> x
  [2]
  ```

* remove方法用于移除列表中某个值的第一个匹配项（remove没有返回值）：

  ```python
  >>> x = ['A','B','C','A']
  >>> x.remove('A')
  >>> x
  ['B','C','A']
  ```

* reverse方法将列表中的元素反向存放：

  ```python
  >>> x = [1,2,3]
  >>> x.reverse()
  >>> x
  [3,2,1]
  ```

* sort方法用于在原位置对列表进行排序：

  ```python
  >>> x = [4,6,2,1,7,9]
  >>> x.sort()
  >>> x
  [1,2,4,6,7,9]
  ```

  高级排序：sort的三个可选参数（cmp,key,reverse)。

## 序列概览

### 序列

python中最基本的数据结构是序列。序列中的每个元素被分配一个序号即元素位置，也称为索引。

- 从左至右：第一个索引为0，第二个为1，以此类推

- 从右至左：序列最后一个元素索引为-1，倒数第二个为-2，以此类推

### 分片

- 第一个索引是需要提取部分的第一个元素的编号，而最后的索引则是分片之后剩下部分的第一个元素的编号。即第一个索引包含在分片内，而第二个则不包含在分片内

- 乘法

  ```python
  >>> [42]*3
  [42,42,42]
  ```

- 成员资格

- 使用 in 运算符，条件为真返回True,条件为假反悔False：

  ```python
  >>> permissions = 'rw'
  >>> 'w' in permissions
  True
  >>> 'x' in permissions
  False
  ```

## 元组

### 元组特点：

* 元组不可修改；用逗号分隔+圆括号。

* tuple函数：以一个序列作为参数并把它转换为元组：

  ```python
  >>> tuple([1,2,3])
  (1,2,3)
  >>> tuple('abc')
  ('a','b','c')
  >>> tuple((1,2,3))
  (1,2,3)
  ```

## 字典

字典是Python中唯一内建的映射类型。字典中的值并没有特殊的顺序，但是都存储在一个特定的键（key）下。键可以是数字，字符串甚至是元组。

### 创建和使用字典

- 字典由多个键及与其对应的值构成的键-值对组成（我们也把键-值对称为项）。每个键和它的值之间用冒号（:）隔开，项之间用逗号（,）隔开，而整个字典是由一对大括号括起来。空字典（不包括任何项）由两个大括号组成，如{}。

- 字典中的键是唯一的（其他类型的映射也是如此），而值并不唯一

- dict函数：可以用dict函数，通过其他映射（比如其他字典）或者（键，值）对的序列建立字典：

  ```python
  >>> items = [('name','Gumby'),('age',42)]
  >>> d = dict(items)
  >>> d
  {'age': 42, 'name': 'Gumby'}
  >>> d['name']
  'Gumby'
  ```

- dict函数也可以通过关键字参数来创建字典，如：

  ```python
  >>> d = dict(name='Gumby',age=42)
  >>> d
  {'age': 42, 'name': 'Gumby'}
  ```

### 基本字典操作

- Len(d)返回d中项（键-值对）的数量
- d[k]返回关联到键k上的值
- d[k]=v将值v关联到键k上
- del d[k]删除键为k的项
- k in d检查d中是否含有键为k的项

### 字典与列表的区别

- **键类型：**字典的键不一定为整型数据（但也可以是），键可以是任意的不可变类型，比如浮点型（实型），字符串或元组
- **自动添加：**即使键起初在字典中并不存在，也可以为它赋值，这样字典就会建立新的项。而（在不使用append方法或者其他类似操作的情况下）不能将值关联到列表范围之外的索引上。
- **成员资格：**表达式k in d（d为字典）查找的是键，而不是值。表达式v in l（l为列表）则用来查找值，而不是索引。

### 字典的格式化字符串

在每个转换说明符中的%字符后面，可以加上键（用圆括号括起来的），后面再跟上其他说明元素：

```python
>>> phonebook = {'Beth':'9120','Alice':'2341','Cecil':'3258'}
>>> "Cecil's phone number is %(Cecil)s."% phonebook
"Cecil's phone number is 3258"
```

### 字典方法

clear,copy,fromkeys,get,has_key,items,iteritems,keys,iterkeys,pop,popitem,setdefault,update,values,itervalues

## 条件、循环和其他语句

使用逗号输出

- 使用print打印多个表达式只需用逗号隔开即可：

  ```python
  >>> print 'Age:',42
  Age: 42
  ```

- 序列解包

  ```python
  >>> scoundrel={'name': 'Robin','girlfriend':'Marion'}
  >>> key,value=scoundrel.popitem()
  >>> key
  'girlfriend'
  >>> value
  'Marion'
  ```

